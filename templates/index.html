<!-- index.html -->
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Live ASR & Translation - Controller</title>
	<link rel="stylesheet" type="text/css" href="/css/live_asr.css">  
	<style>
	  body {
		transition: background-color 0.3s, color 0.3s;
	  }

	  /* 라이트 모드 기본 */
	  body {
		background-color: #f1f4ff;
		color: black;
	  }

	  /* 다크 모드 자동 감지 */
	  @media (prefers-color-scheme: dark) {
		body {
		  background-color: #222;
		  color: #e0e0e0;
		}
	  }
	  </style>
</head>
<body>
    <div id="rejection-overlay">
        <div class="overlay-content"><h2>연결 거부됨</h2><p>이 스트림은 다른 곳에서 제어 중입니다.<br>이 창은 비활성화됩니다.</p></div>
    </div>
    
    <div class="container-wrapper">
        <div class="container">
		<a href="" id="open-viewer-link" target="_blank" class="open-viewer">T</a>
            <h1>실시간 번역</h1>
            <div class="status-box">
                <h3>상태: <span id="status">대기 중</span></h3>
            </div>
            
            <!-- [추가] 설정 영역 -->
            <div class="settings-area">
                <div class="setting-item">
                    <label for="silence-threshold-slider">문장 끝 침묵 구간:</label>
                    <div class="slider-container">
                        <span>짧게</span>
                        <input type="range" id="silence-threshold-slider" min="0.2" max="1.5" step="0.1" value="0.6">
                        <span>길게</span>
                        <span id="silence-threshold-value">0.6s</span>
                    </div>
                </div>
                <div class="setting-item">
                    <label for="translation-engine-select">번역 엔진:</label>
                    <select id="translation-engine-select">
                        <option value="deepl" selected>DeepL</option>
                        <option value="papago">Papago</option>
                        <option value="google">Google</option>
                    </select>
                </div>
            </div>

            <div class="control-area" id="mic-control-area">
                <h2>1. 실시간 음성인식</h2>
                <label for="mic-select">입력장치 선택:</label>
                <select id="mic-select" class="mic-select" ></select>
                <button id="record-btn">음성인식 시작</button>  
            </div>
			
			<div class="control-area" id=" " >
                <h2>2. 번역 언어 선택</h2>
				<div class="lang_select_box">
				  <div>번역 1 <select class="lang-select" id="lang-select-1"></select></div>
				  <div>번역 2 <select class="lang-select" id="lang-select-2"></select></div>
				  <div>번역 3 <select class="lang-select" id="lang-select-3"></select></div>
				</div>
                
            </div> 

            <div class="control-area" id="file-control-area" style="display:none">
                <h2>2. 파일로 전송</h2>
                <input type="file" id="file-input" accept="audio/*,video/*">
                <canvas id="waveform-canvas"></canvas>
                <div class="player-controls">
                    <button id="restart-btn" disabled>⏮</button>
                    <button id="play-pause-btn" disabled>▶️</button>
                </div>
            </div> 

            <div class="control-area"style="display:none">
                <h2>3. 브라우저 전송</h2>    
                <button id="tab-audio-btn">탭 오디오 캡처</button>
            </div>		
        </div>

        <div class="container"style="display:none">
          
            <div class="transcription-box">
                <h3>음성 인식 내용</h3>
                <div id="transcription-output" class="output-div"></div>
            </div>
            <div class="transcription-box">
                <h3>번역 1 <select class="lang-select" id="lang-select-1"></select></h3>
                <div id="translation-output-1" class="output-div"></div>
            </div>
            <div class="transcription-box">
                <h3>번역 2 <select class="lang-select" id="lang-select-2"></select></h3>
                <div id="translation-output-2" class="output-div"></div>
            </div>
            <div class="transcription-box">
                <h3>번역 3 <select class="lang-select" id="lang-select-3"></select></h3>
                <div id="translation-output-3" class="output-div"></div>
            </div>
        </div>
    </div>
    <script src="/js/controller.js"></script>
</body>
</html>